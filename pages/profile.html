<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thư Viện Số</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;700&display=swap"
        rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <link rel="stylesheet" href="/assets/css/profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.css">
</head>

<body>
    <div id="topbar-placeholder"></div>

    <div id="sidebar-placeholder"></div>

    <div class="main-content">
        <div class="profile-header">
            <div class="profile-banner">
                <img src="/assets/images/background.jpg" alt="Profile Banner">
            </div>
            <div class="profile-avatar">
                <img src="/assets/images/logo.gif" alt="User Avatar" id="display-avatar-img">
            </div>
        </div>

        <div class="profile-body container-fluid">
            <div class="profile-content-wrapper">

                <div class="profile-info-column">
                    <h4 class="profile-username" id="display-username">Đang tải...</h4>
                    <p class="profile-realname text-secondary" id="display-realname">Đang tải...</p>

                    <div class="profile-actions-desktop d-none d-lg-flex">
                        <a href="#" class="btn btn-outline-dark" id="btn-upload-desktop"
                            data-lang-key="uploadBtn">Upload</a>
                        <a href="#" class="btn btn-outline-dark" id="btn-follow-desktop"
                            data-lang-key="followBtn">Follow</a>
                        <a href="#" class="btn btn-danger" id="btn-report-desktop" data-lang-key="reportBtn">Report</a>
                        <a href="#" class="btn btn-secondary" id="btn-signout-desktop" data-lang-key="signOutBtn">Sign
                            Out</a>
                    </div>

                    <div class="profile-actions-mobile dropdown d-lg-none">
                        <button class="btn" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" id="btn-upload-mobile"
                                    data-lang-key="uploadBtn">Upload</a></li>
                            <li><a class="dropdown-item" href="#" id="btn-follow-mobile"
                                    data-lang-key="followBtn">Follow</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item text-danger" href="#" id="btn-report-mobile"
                                    data-lang-key="reportBtn">Report</a></li>
                            <li><a class="dropdown-item" href="#" id="btn-signout-mobile"
                                    data-lang-key="signOutBtn">Sign Out</a></li>
                        </ul>
                    </div>
                </div>

                <div class="profile-tabs-column">
                    <ul class="nav nav-tabs" id="profileTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="info-tab" data-bs-toggle="tab"
                                data-bs-target="#info-tab-pane" type="button" role="tab" data-lang-key="infoTab"
                                data-lang-key="infoTab">Info</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="upload-tab" data-bs-toggle="tab"
                                data-bs-target="#upload-tab-pane" type="button" role="tab"
                                data-lang-key="uploadTab">Upload</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="activity-tab" data-bs-toggle="tab"
                                data-bs-target="#activity-tab-pane" type="button" role="tab"
                                data-lang-key="activityTab">Activity</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="favorites-tab" data-bs-toggle="tab"
                                data-bs-target="#favorites-tab-pane" type="button" role="tab"
                                data-lang-key="favoritesTab">Favorites</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="security-tab" data-bs-toggle="tab"
                                data-bs-target="#security-tab-pane" type="button" role="tab"
                                data-lang-key="securityTab">Bảo mật</button>
                        </li>
                    </ul>
                    <div class="tab-content" id="profileTabContent">

                        <div class="tab-pane fade show active" id="info-tab-pane" role="tabpanel">
                            <h5 class="pt-3" data-lang-key="settingsInfoTitle">Cài đặt Thông tin</h5>
                            <p class="text-secondary small" data-lang-key="settingsInfoSubtitle">Đây là cách người khác
                                nhìn thấy bạn.</p>

                            <div id="profile-status" class="mb-3"></div>

                            <form id="profile-form-inputs">
                                <div class="mb-3">
                                    <label for="profile-username" class="form-label" data-lang-key="usernameLabel">Tên
                                        đăng nhập (Username)</label>
                                    <input type="text" class="form-control" id="profile-username" readonly disabled>
                                    <div class="form-text" data-lang-key="usernameHelpText">Bạn không thể thay đổi tên
                                        đăng nhập.</div>
                                </div>
                                <div class="mb-3">
                                    <label for="profile-fullname" class="form-label" data-lang-key="fullNameLabel">Họ và
                                        tên (Full Name)</label>
                                    <input type="text" class="form-control" id="profile-fullname"
                                        placeholder="Tên của bạn..." data-lang-key-placeholder="fullNamePlaceholder">
                                </div>

                                <div class="mb-3">
                                    <label for="profile-phone" class="form-label" data-lang-key="phoneLabel">Số điện
                                        thoại</label>
                                    <input type="tel" class="form-control" id="profile-phone" placeholder="09xxxxxxxx">
                                </div>
                                <div class="mb-3">
                                    <label for="profile-age" class="form-label" data-lang-key="ageLabel">Tuổi</label>
                                    <input type="number" class="form-control" id="profile-age" placeholder="Ví dụ: 18"
                                        min="1">
                                </div>

                                <div class="mb-3">
                                    <label for="profile-avatar" class="form-label" data-lang-key="avatarLinkLabel">Link
                                        ảnh đại diện:</label>

                                    <input type="text" class="form-control" id="profile-avatar"
                                        placeholder="https://..." readonly disabled>

                                    <label for="avatar-file-input" class="form-label mt-2"
                                        data-lang-key="avatarChangeLabel">Thay đổi avatar:</label>
                                    <input type="file" class="form-control" id="avatar-file-input"
                                        accept="image/png, image/jpeg, image/gif">

                                </div>
                                <div class="mb-3">
                                    <label for="background-file-input" class="form-label mt-2"
                                        data-lang-key="backgroundChangeLabel">Thay đổi ảnh bìa:</label>
                                    <input type="file" class="form-control" id="background-file-input"
                                        accept="image/png, image/jpeg, image/gif">
                                </div>
                                <button type="button" class="btn btn-dark" id="update-profile-button"
                                    data-lang-key="updateProfileButton">
                                    <i class="fas fa-save me-2"></i> Cập nhật Profile
                                </button>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="upload-tab-pane" role="tabpanel">
                            <div class="pt-3">
                                <h5 data-lang-key="uploadTitle">Tải lên Tài liệu</h5>
                                <p class="text-secondary small" data-lang-key="uploadSubtitle">Chọn file tài liệu để tải
                                    lên thư viện.</p>

                                <div id="upload-status" class="mb-3"></div>

                                <form id="upload-form">
                                    <div class="mb-3">
                                        <label for="document-title" class="form-label"
                                            data-lang-key="documentTitle">Tiêu đề tài liệu</label>
                                        <input type="text" class="form-control" id="document-title" required
                                            placeholder="Nhập tiêu đề tài liệu...">
                                    </div>

                                    <div class="mb-3">
                                        <label for="document-author" class="form-label"
                                            data-lang-key="documentAuthor">Tác giả</label>
                                        <input type="text" class="form-control" id="document-author" required
                                            placeholder="Tên tác giả...">
                                    </div>

                                    <div class="mb-3">
                                        <label for="document-year" class="form-label" data-lang-key="documentYear">Năm
                                            xuất bản</label>
                                        <input type="number" class="form-control" id="document-year" min="1900"
                                            max="2030" value="2024">
                                    </div>

                                    <div class="mb-3">
                                        <label for="document-description" class="form-label"
                                            data-lang-key="documentDescription">Mô tả</label>
                                        <textarea class="form-control" id="document-description" rows="3"
                                            placeholder="Mô tả ngắn về tài liệu..."></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label for="document-thumbnail-file" class="form-label"
                                            data-lang-key="documentThumbnail">Ảnh bìa (tùy chọn)</label>
                                        <input type="file" class="form-control" id="document-thumbnail-file"
                                            accept="image/png, image/jpeg, image/gif">
                                        <div class="form-text" data-lang-key="documentThumbnailHelp">Tải lên ảnh bìa cho
                                            cuốn sách (Tối đa 2MB).</div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="document-file" class="form-label" data-lang-key="documentFile">Chọn
                                            file tài liệu</label>
                                        <input type="file" class="form-control" id="document-file"
                                            accept=".pdf,.doc,.docx,.txt,.epub,.mobi" required>
                                        <div class="form-text" data-lang-key="documentFileHelp">Hỗ trợ: PDF, DOC, DOCX,
                                            TXT, EPUB, MOBI (Tối đa 10MB)</div>
                                    </div>

                                    <button type="submit" class="btn btn-primary" id="upload-submit-button"
                                        data-lang-key="uploadSubmit">
                                        <i class="fas fa-upload me-2"></i> Tải lên Tài liệu
                                    </button>
                                </form>

                                <hr class="my-4">

                                <h6 data-lang-key="uploadedDocuments">Tài liệu đã tải lên</h6>
                                <div id="uploaded-documents-list" class="mt-3">
                                    <p class="text-muted" data-lang-key="loadingDocuments">Đang tải danh sách tài
                                        liệu...</p>
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane fade" id="activity-tab-pane" role="tabpanel">
                            <p class="pt-3">Đây là danh sách các file đã được upload.</p>
                        </div>
                        <div class="tab-pane fade" id="activity-tab-pane" role="tabpanel">
                            <p class="pt-3">Đây là lịch sử hoạt động của người dùng.</p>
                        </div>
                        <div class="tab-pane fade" id="activity-tab-pane" role="tabpanel">
                            <p class="pt-3">Đây là danh sách các mục yêu thích.</p>
                        </div>
                        <div class="tab-pane fade" id="security-tab-pane" role="tabpanel">
                            <h5 class="pt-3" data-lang-key="changeEmailTitle">Đổi Email</h5>

                            <div id="email-status" class="mb-3"></div>

                            <form id="email-change-form">
                                <p class="text-secondary small" data-lang-key="changeEmailSubtitle">
                                    Chúng tôi sẽ gửi link xác nhận đến cả email cũ và mới của bạn.
                                </p>
                                <div class="mb-3">
                                    <label for="new-email" class="form-label" data-lang-key="newEmailLabel">Email
                                        mới</label>
                                    <input type="email" class="form-control" id="new-email" required>
                                </div>
                                <div class="mb-3">
                                    <label for="confirm-new-email" class="form-label"
                                        data-lang-key="confirmNewEmailLabel">Xác nhận email mới</label>
                                    <input type="email" class="form-control" id="confirm-new-email" required>
                                </div>
                                <button type="submit" class="btn btn-dark" id="change-email-button"
                                    data-lang-key="changeEmailButton">
                                    Gửi Yêu cầu Đổi Email
                                </button>
                            </form> <br>
                            <h5 class="pt-3" data-lang-key="changePasswordTitle">Đổi mật khẩu</h5>
                            <p class="text-secondary small">Để bảo mật, mật khẩu của bạn phải có ít nhất 6 ký tự.</p>

                            <div id="password-status" class="mb-3"></div>

                            <form id="password-change-form">
                                <div class="mb-3">
                                    <label for="new-password" class="form-label" data-lang-key="newPasswordLabel">Mật
                                        khẩu mới</label>
                                    <input type="password" class="form-control" id="new-password" required
                                        minlength="6">
                                </div>
                                <div class="mb-3">
                                    <label for="confirm-new-password" class="form-label"
                                        data-lang-key="confirmNewPasswordLabel">Xác nhận mật khẩu mới</label>
                                    <input type="password" class="form-control" id="confirm-new-password" required
                                        minlength="6">
                                </div>
                                <button type="submit" class="btn btn-dark" id="change-password-button"
                                    data-lang-key="changePasswordButton">
                                    Lưu Mật Khẩu Mới
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="avatar-cropper-modal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalLabel">Cắt ảnh đại diện</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="cropper-ui" style="width: 100%; height: 400px;"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-primary" id="crop-save-button">Lưu ảnh</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="background-cropper-modal" tabindex="-1" aria-labelledby="modalLabelBg"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalLabelBg">Cắt ảnh bìa</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="background-cropper-ui" style="width: 100%; height: 400px;"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-primary" id="background-crop-save-button">Lưu ảnh</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/app-ui.js" defer></script>
    <script type="module" src="/js/profile.js"></script>
</body>

</html>